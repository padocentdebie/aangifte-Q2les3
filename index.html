<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>PV-Trainer: Case Samir</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Rajdhani:wght@500;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --politie-lichtblauw: #e3f2fd;
            --politie-donkerblauw: #1a3a5a;
            --politie-geel: #fff9c4;
            --politie-goud: #fbc02d;
            --succes-groen: #2e7d32;
            --fout-rood: #c62828;
            --achtergrond: #fdfdfd;
        }

        body { 
            font-family: 'Rajdhani', sans-serif; 
            background-color: var(--achtergrond); 
            color: var(--politie-donkerblauw); 
            padding: 0; margin: 0; text-transform: uppercase;
            height: 100vh; display: flex; flex-direction: column;
        }
        
        .header-bar { 
            background-color: var(--politie-lichtblauw); 
            border-bottom: 4px solid var(--politie-donkerblauw); 
            padding: 15px 25px; flex-shrink: 0; 
        }
        
        h1 { font-family: 'Oswald', sans-serif; font-size: 22px; margin: 0; color: var(--politie-donkerblauw); }

        .disclaimer {
            background: var(--politie-geel); padding: 10px 25px; font-size: 11px; 
            text-transform: none; border-bottom: 1px solid var(--politie-goud); flex-shrink: 0;
        }

        .sticky-input-section {
            background: white; padding: 20px 25px; 
            border-bottom: 2px solid var(--politie-lichtblauw);
            flex-shrink: 0; z-index: 100;
        }
        
        textarea { 
            width: 100%; height: 120px; padding: 15px; border: 2px solid var(--politie-lichtblauw); 
            font-size: 16px; font-family: 'Roboto Mono'; resize: none; text-transform: none; 
            box-sizing: border-box; background-color: #fafafa;
        }

        .main-button {
            width: 100%; padding: 18px; background: var(--politie-donkerblauw); color: white;
            font-family: 'Oswald'; border: none; cursor: pointer; font-size: 18px; 
            margin-top: 10px; letter-spacing: 1px;
        }

        .main-button:hover { background: #2c527a; }

        /* Scrollbare sectie */
        .scroll-container { 
            flex-grow: 1; overflow-y: auto; padding: 25px;
            display: grid; grid-template-columns: 1fr 380px; gap: 25px;
        }

        .result-column { display: flex; flex-direction: column; gap: 25px; }

        .box-style { 
            background: white; border: 1px solid var(--politie-lichtblauw); 
            padding: 25px; border-radius: 4px; 
        }

        #highlightbox { 
            white-space: pre-wrap; line-height: 2.4; font-size: 17px; 
            text-transform: none; color: #333;
        }

        .feedback-area { background-color: var(--politie-lichtblauw); }
        
        .feedback-input { 
            width: 100%; height: 200px; border: 1px solid var(--politie-donkerblauw); 
            padding: 15px; font-family: 'Rajdhani'; font-size: 16px; 
            text-transform: none; box-sizing: border-box; background: white;
        }

        .sidebar { 
            background: var(--politie-geel); border: 1px solid var(--politie-goud); 
            padding: 20px; height: fit-content; position: sticky; top: 0;
        }

        .score-item { 
            margin-bottom: 15px; padding-bottom: 5px; border-bottom: 1px solid rgba(0,0,0,0.05); 
            display: flex; justify-content: space-between; font-weight: bold;
        }

        /* HIGHLIGHTS */
        .hl-ovt { background-color: var(--succes-groen); color: white; padding: 1px 4px; }
        .hl-vd { background-color: var(--fout-rood); color: white; padding: 1px 4px; }
        .hl-wet { border-bottom: 3px solid var(--politie-donkerblauw); font-weight: bold; }
        .hl-w { background-color: var(--politie-geel); border-bottom: 2px solid var(--politie-goud); }
    </style>
</head>
<body>

<div class="header-bar">
    <h1>PV-TRAINING: AANGIFTE-ANALYSE</h1>
</div>

<div class="disclaimer">
    PRIVACY: UW INVOER WORDT LOKAAL VERWERKT EN NIET OP HET INTERNET GEDEELD. DIT IS EEN DIDACTISCH HULPMIDDEL.
</div>

<div class="sticky-input-section">
    <textarea id="pvInput" placeholder="TYPE HIER HET PROCES-VERBAAL OP BASIS VAN DE VERKLARING VAN SAMIR..."></textarea>
    <button class="main-button" onclick="analyseerTekst()">ANALYSEER & START FEEDBACK-RONDE</button>
</div>

<div class="scroll-container">
    <div class="result-column">
        <div class="box-style">
            <div style="font-family:'Oswald'; margin-bottom:15px; color:var(--politie-donkerblauw);">GEANALYSEERDE TEKST</div>
            <div id="highlightbox">VOER EEN TEKST IN EN DRUK OP DE KNOP BOVENAAN.</div>
        </div>

        <div class="box-style feedback-area">
            <div style="font-family:'Oswald'; margin-bottom:10px; color:var(--politie-donkerblauw);">COLLEGIALE FEEDBACK</div>
            <textarea class="feedback-input" placeholder="DEEL HIER JE FEEDBACK MET JE COLLEGA..."></textarea>
        </div>
    </div>

    <aside class="sidebar">
        <div style="font-family:'Oswald'; font-size: 18px; margin-bottom: 20px;">AUTOMATISCHE INDICATOREN</div>
        <div id="results">
            Wacht op analyse...
        </div>
    </aside>
</div>

<script>
function analyseerTekst() {
    let tekst = document.getElementById('pvInput').value;
    if(!tekst) return;

    let h = { w:0, ovt:0, vd:0, wet:0 };

    const wLijst = ["wie", "wat", "waar", "wanneer", "waarom", "waarmee", "op welke wijze"];
    const wetWoorden = ["zag dat", "hoorde dat", "nam waat dat", "rook dat", "voelde dat", "verklaarde dat"];

    wLijst.forEach(w => {
        let r = new RegExp('\\b'+w+'\\b', 'gi');
        tekst = tekst.replace(r, m => { h.w++; return `<span class="hl-w">${m}</span>`; });
    });

    wetWoorden.forEach(w => {
        let r = new RegExp(w, 'gi');
        tekst = tekst.replace(r, m => { h.wet++; return `<span class="hl-wet">${m}</span>`; });
    });

    const ovtRegex = /\b(liep|stond|keek|zag|hoorde|pakte|rende|kwam|sloeg|bevond|waarnam|verklaarde)\b|\b(\w+(de|te|den|ten))\b/gi;
    tekst = tekst.replace(ovtRegex, m => {
        if(m.includes('<span')) return m;
        h.ovt++; return `<span class="hl-ovt">${m}</span>`;
    });

    const vdRegex = /\b(heb|heeft|ben|is|was|werd)\s+(\w+([dt]))\b|\b(ge\w+[dt])\b/gi;
    tekst = tekst.replace(vdRegex, m => {
        if(m.includes('<span')) return m;
        h.vd++; return `<span class="hl-vd">${m}</span>`;
    });

    document.getElementById('highlightbox').innerHTML = tekst;
    document.getElementById('results').innerHTML = `
        <div class="score-item"><span>GOUDEN W'S:</span> <span>${h.w}</span></div>
        <div class="score-item"><span>WETENSCHAP:</span> <span>${h.wet}</span></div>
        <div class="score-item"><span>OVT (GOED):</span> <span>${h.ovt}</span></div>
        <div class="score-item"><span>VOLT. DEELW:</span> <span>${h.vd}</span></div>
        <p style="text-transform:none; font-size:12px; margin-top:20px; line-height:1.4;">
            LET OP: DE TELLER GEEFT EEN INDICATIE. GEBRUIK HET FEEDBACKVELD VOOR DE INHOUDELIJKE KWALITEIT.
        </p>
    `;
}
</script>
</body>
</html>
